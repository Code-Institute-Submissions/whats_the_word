{%extends 'base.html'%}

{%block content%}
<div class="col-12">
    <h3>Your results in the database</h3><br>

<!-- ********************************************************* FLASH MESSAGES -->
    {% with messages = get_flashed_messages() %} 
        {% if messages %}
            {% for message in messages %}
            <p class="flashed">{{ message }}</p>
            {% endfor %}
        {% endif %} 
    {% endwith %}

 <!-- ********************************************************* TEXT -->   
    <div class="row results light">
        <div class="col-12 edit-text">
            <p>
                You can check here all results that were stored from your session.<br>
                Those results are stored so you can check them again in the future and
                they are also part of the global words result.
                If you'd like to remove something, just press remove :)
            </p>

            <p class="tiny-text">
                Results for session id: {{input._id}}
            </p>
           
        </div>
        
    </div>
    <div class="row">
        <div class="col-12 how-to">
            <hr>
            {% for item in input%}
                {% if item != "_id" and input[item] != "" %}
                <!-- ********************************************************* STRINGS -->
                    {% if item == "messages" or item == "period_length" or item == "longest_word"%}
                        <p>
                            {{item}}: {{input[item]}}
                        </p>
                        <p>
                            <a href="{{ url_for('delete_item', input_id=input._id, item=item) }}">remove</a>
                        </p>
                <!-- ********************************************************* LISTS -->
                    {% elif item == "participants" or item == "words" or item == "word_combinations" or item == "longest_word_dates" %}
                        <p>{{item}}:<br>
                        {% for participant in input[item] %}
                                {{participant[0]}},&nbsp;{{participant[1]}}&nbsp;/
                        {% endfor %}
                        </p>
                        <p>
                            <a href="{{ url_for('delete_item', input_id=input._id, item=item) }}">remove</a>
                        </p>
                 <!-- ********************************************************* DICTS -->       
                    {% else %}
                        <p>{{item}}:<br>
                            {% for participant in input[item] %}
                                    {{participant}},&nbsp;{{input[item][participant]}}&nbsp;/
                            {% endfor %}
                        </p>
                        <p>
                            <a href="{{ url_for('delete_item', input_id=input._id, item=item) }}">remove</a>
                        </p>
                        
                    {% endif %}
                    <hr>
                {% endif %}   
            {% endfor %}

        </div>
    </div>

    <!-- ********************************************************* DELETE ALL -->
    <div class="row">
        <div class="col-12">
            <p>
                <a href="{{ url_for('delete_results', input_id=input._id) }}">
                    Delete all my results
                </a>
            </p>
        </div>
    <!-- ********************************************************* CONSULT -->
        <div class="col-12 col-sm-6">
            <p>
                <form action="consultdb" method="POST">
                    <input type="text" name="session_id" value="{{input._id}}" class="d-none">
                    <i class="material-icons">reply</i><br>
                    <input class="btn-large dark" type="submit" value="Back to my results">
                </form>
            </p>
        </div>
    <!-- ********************************************************* GLOBAL RESULTS -->
        <div class="col-12 col-sm-6">
            <p>
                <form>
                <i class="material-icons">sentiment_very_satisfied</i><br>
                <a href="{{ url_for('global_words') }}">
                    <button class="btn-large dark">  
                            Allow this data to be part of the global results!
                    </button>
                </a>
                </form>
            </p>
        </div>
    </div>

</div>

{%endblock%}